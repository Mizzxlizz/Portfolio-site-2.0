on: push
name: Deploy to webserver
jobs:
  FTP-Deploy-Action:
    name: 'SFTP Upload'
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@master
      with:
        fetch-depth: 3
    - name: 'deployment-pending'
      uses: 'deliverybot/deployment-status@v1'
      with:
        state: 'pending'
        token: '${{ secrets.GITHUB_TOKEN }}' 
    - name: 'deploying-to-ftp'
      uses: SamKirkland/FTP-Deploy-Action@3.0.0
      with:
        ftp-server: sftp://ssh.strato.de/jelleglebbeek/hsleiden
        ftp-username: ${{ secrets.FTP_USERNAME }}
        ftp-password: ${{ secrets.FTP_PASSWORD }}
        git-ftp-args: --insecure
    - name: 'deployment-success'
      if: success()
      uses: 'deliverybot/deployment-status@v1'
      with:
        state: 'success'
        token: '${{ secrets.GITHUB_TOKEN }}'

    - name: 'deployment-failure'
      if: failure()
      uses: 'deliverybot/deployment-status@v1'
      with:
        state: 'failure'
        token: '${{ secrets.GITHUB_TOKEN }}' 
